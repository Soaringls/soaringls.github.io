
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../algebraist/">
      
      
        <link rel="next" href="../estimation_optimizer/">
      
      
      <link rel="icon" href="../../logo.jpg">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>状态估计-滤波 - Notebook of Dexter</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#-" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Notebook of Dexter" class="md-header__button md-logo" aria-label="Notebook of Dexter" data-md-component="logo">
      
  <img src="../../logo.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Notebook of Dexter
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              状态估计-滤波
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../coding/coding_work_style/" class="md-tabs__link">
          
  
  Coding

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../dairy/about_human/" class="md-tabs__link">
          
  
  Dairy

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../m%26l/calib_imu_wheel/" class="md-tabs__link">
          
  
  M&l

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../algebraist/" class="md-tabs__link">
          
  
  Math

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/00_setup_work_space_mac/" class="md-tabs__link">
          
  
  Tools

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Notebook of Dexter" class="md-nav__button md-logo" aria-label="Notebook of Dexter" data-md-component="logo">
      
  <img src="../../logo.jpg" alt="logo">

    </a>
    Notebook of Dexter
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Coding
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Coding
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/coding_work_style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coding work style
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/c%2B%2B/cpp_new_future/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ New Feture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/c%2B%2B/note_tips_cpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ Tips and Tricks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/c%2B%2B/test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/c%2B%2B/the_essence_of_c%2B%2B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bjarne Strooustrup:The Essence of C++
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/python/000_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/python/00_book_basic_note/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Basic Note
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/python/01_book_basic_class/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python 类和对象
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/python/02_book_advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python advance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/python/03_dev_env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python开发环境搭建
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ros
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Ros
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/ros/00_ros_msg_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS&amp;Cartographer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    System&structure
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            System&structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/system%26structure/operation_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operation system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/system%26structure/several_design_patterns_by_cpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Several Design Patterns By C++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/system%26structure/uml_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UML Graphic
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dairy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Dairy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dairy/about_human/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About human
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dairy/meetint_key_points/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Meetint key points
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dairy/note-no-valience-chatting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    读书笔记:非暴力沟通
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dairy/note-the-seven-habits-of-effective-awosome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    读书笔记:高效人士的七个习惯
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    M&l
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            M&l
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/calib_imu_wheel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TODO: calib_imu_wheel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/cloud_registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    点云配准
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/imu_kernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMU使用示例及噪声计算
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/loc_gauss_newton_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    高斯牛顿实践-以视觉定位为例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/loc_visual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    视觉定位(车道线匹配)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/mapping_kernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mapping kernel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/slam_based_lidar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ing-slam-lidar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/slam_based_visual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ing-slam-visual
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/slambook2_appendix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    done-slambook2额外补充材料
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/tf_rigid_motion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    done刚体运动-三维旋转变换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" >
        
          
          <label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Segmentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_11">
            <span class="md-nav__icon md-icon"></span>
            Segmentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/segmentation/cloud-segmentation-hdmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    点云分割实例
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12" >
        
          
          <label class="md-nav__link" for="__nav_4_12" id="__nav_4_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Slam opensource
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_12">
            <span class="md-nav__icon md-icon"></span>
            Slam opensource
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/slam_opensource/slam_basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slam basic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../m%26l/slam_opensource/slam_loam_series/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Loam series
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Math
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algebraist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    矩阵和向量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    状态估计-滤波
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    状态估计-滤波
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wikipedia" class="md-nav__link">
    <span class="md-ellipsis">
      卡尔曼滤波器wikipedia系统模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="卡尔曼滤波器wikipedia系统模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      预测
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      更新
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      不变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      推导后验估计协方差矩阵
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eskf" class="md-nav__link">
    <span class="md-ellipsis">
      ESKF
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ESKF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      优点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eskf_1" class="md-nav__link">
    <span class="md-ellipsis">
      ESKF基本介绍
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ycw" class="md-nav__link">
    <span class="md-ellipsis">
      卡尔曼滤波(ycw)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="卡尔曼滤波(ycw)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-equations" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Equations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-process-to-be-estimated" class="md-nav__link">
    <span class="md-ellipsis">
      The process to be estimated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-computational-origin-of-the-filter" class="md-nav__link">
    <span class="md-ellipsis">
      The computational origin of the filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-discrete-kalman-filter-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      The discrete Kalman Filter Algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-of-kalman-filter" class="md-nav__link">
    <span class="md-ellipsis">
      Python of Kalman Filter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../estimation_optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    状态估计-优化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../geometry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    几何学
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/00_setup_work_space_mac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup work space on Mac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/mathjax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    usage of mathjax
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/python_matplotlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tools python-matploglib
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/tools-devel-environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tools devel-enviroment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/usage_bazel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Bazel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/usage_git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git常见命令使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/usage_markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage markdown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/usage_shortcut/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage shortcut
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/workspace_setup_ubuntu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup worksapce in ubuntu
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wikipedia" class="md-nav__link">
    <span class="md-ellipsis">
      卡尔曼滤波器wikipedia系统模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="卡尔曼滤波器wikipedia系统模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      预测
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      更新
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      不变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      推导后验估计协方差矩阵
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eskf" class="md-nav__link">
    <span class="md-ellipsis">
      ESKF
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ESKF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      优点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eskf_1" class="md-nav__link">
    <span class="md-ellipsis">
      ESKF基本介绍
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ycw" class="md-nav__link">
    <span class="md-ellipsis">
      卡尔曼滤波(ycw)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="卡尔曼滤波(ycw)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-equations" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Equations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-process-to-be-estimated" class="md-nav__link">
    <span class="md-ellipsis">
      The process to be estimated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-computational-origin-of-the-filter" class="md-nav__link">
    <span class="md-ellipsis">
      The computational origin of the filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-discrete-kalman-filter-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      The discrete Kalman Filter Algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-of-kalman-filter" class="md-nav__link">
    <span class="md-ellipsis">
      Python of Kalman Filter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="-">状态估计-滤波<a class="headerlink" href="#-" title="Permanent link">&para;</a></h1>
<h2 id="wikipedia">卡尔曼滤波器wikipedia系统模型<a class="headerlink" href="#wikipedia" title="Permanent link">&para;</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Kalman_filter#Underlying_dynamic_system_model">https://en.wikipedia.org/wiki/Kalman_filter#Underlying_dynamic_system_model</a></p>
<p><a href="https://blog.csdn.net/dou3516/article/details/126479836">目标追踪: 匈牙利匹配和kalmanfilter详解-good</a></p>
<p><a href="https://github.com/ApolloAuto/apollo/blob/master/modules/perception/common/graph/gated_hungarian_bigraph_matcher.h">apollo匈牙利匹配</a></p>
<table>
<thead>
<tr>
<th>表示</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="arithmatex">\(F_k\)</span></td>
<td>状态转移模型</td>
</tr>
<tr>
<td><span class="arithmatex">\(Q_k\)</span></td>
<td>过程噪声协方差</td>
</tr>
</tbody>
</table>
<p>卡尔曼滤波器模型假设k时刻的真实状态是 根据<span class="arithmatex">\(k-1\)</span>处的状态演化而来,<span class="arithmatex">\(w_k\)</span>是过程噪声,<span class="arithmatex">\(w_k \sim N(0,Q_k)\)</span></p>
<div class="arithmatex">\[
\hat{X}_{k}=F_kX_{k-1}+B_ku_k+w_k
\]</div>
<table>
<thead>
<tr>
<th>表示</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="arithmatex">\(H_k\)</span></td>
<td>观测模型，真实状态空间映射到观测空间</td>
</tr>
<tr>
<td><span class="arithmatex">\(R_k\)</span></td>
<td>观测噪声协方差</td>
</tr>
</tbody>
</table>
<p>在时间k 处，根据以下公式 对真实状态<span class="arithmatex">\(X_k\)</span>进行观察（或测量）<span class="arithmatex">\(Z_k\)</span>，<span class="arithmatex">\(v_k\)</span>是观测噪声，<span class="arithmatex">\(v_k \sim N(0, R_k)\)</span></p>
<div class="arithmatex">\[Z_k = H_kX_k+v_k\]</div>
<h3 id="_1">预测<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<ul>
<li>预测(先验)状态估计</li>
</ul>
<div class="arithmatex">\[
  \hat{X}_{k|k-1}=F_kX_{k-1|k-1}+B_ku_k
\]</div>
<ul>
<li>预测(先验)估计协方差(预测协方差)</li>
</ul>
<div class="arithmatex">\[
  \hat{P}_{k|k-1}=F_kP_{k-1|k-1}F^T_k+Q_k
\]</div>
<h3 id="_2">更新<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ul>
<li>创新/测量预拟合残差</li>
</ul>
<div class="arithmatex">\[
  \tilde{y}_k=Z_k - H_k\hat{X}_{k|k-1}
\]</div>
<ul>
<li>创新/测量预拟合残差-协方差(将协方差P映射到观测空间并加上观测噪声)</li>
</ul>
<div class="arithmatex">\[
  S_k = H_k\hat{P}_{k|k-1}H^T_k + R_k
\]</div>
<ul>
<li>最优卡尔曼增益---&gt;用于估计误差重要程度</li>
</ul>
<div class="arithmatex">\[
  K_k = \hat{P}_{k|k-1}H^T_kS^{-1}_k
\]</div>
<ul>
<li>[for next迭代] 更新(后验)状态估计</li>
</ul>
<div class="arithmatex">\[
  X_{k|k}=\hat{X}_{k|k-1} + K_k\tilde{y}_k
\]</div>
<ul>
<li>[for next迭代] 更新(后验)估计协方差</li>
</ul>
<div class="arithmatex">\[
  P_{k|k} = (I-K_kH_k)\hat{P}_{k|k-1}
\]</div>
<ul>
<li>测量拟合后残差</li>
</ul>
<div class="arithmatex">\[
  \tilde{y}_{k|k} = Z_k - H_kX_{k|k}
\]</div>
<h3 id="_3">不变量<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>如果模型准确,且值<span class="arithmatex">\(\hat{x}_{0|0}\)</span>和<span class="arithmatex">\(P_{0|0}\)</span>准备反映初始状态值分布，则保留一下不变量</p>
<div class="arithmatex">\[E[x_k - \hat{x}_{k|k}] =E[x_k - \hat{x}_{k|k-1}]=0\]</div>
<div class="arithmatex">\[E[\tilde{y}_k]=0\]</div>
<div class="arithmatex">\[P_{k|k} = cov(x_k - \hat{x}_{k|k})\]</div>
<div class="arithmatex">\[P_{k|k-1} = cov(x_k - \hat{x}_{k|k-1})\]</div>
<div class="arithmatex">\[S_k=cov(\tilde{y}_k)\]</div>
<h3 id="_4">推导后验估计协方差矩阵<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<div class="arithmatex">\[
\begin{align}
P_{k|k} &amp;= cov(x_k - \hat{x}_{x|k}) \\
&amp;=cov[x_k - (\hat{x}_{k|k-1} + K_k\tilde{y}_k)] \\
&amp;=cov[x_k - (\hat{x}_{k|k-1} + K_k(z_k - H_k\hat{x}_{k|k-1}))] \\
&amp;=cov[x_k - (\hat{x}_{k|k-1} + K_k(H_kx_k+v_k - H_k\hat{x}_{k|k-1}))] \\
&amp;=cov[(I-K_kH_k)(x_k - \hat{x}_{k|k-1})-K_kv_k] \quad \text{测量误差 v_k与其他项不相关}\\
&amp;=cov[(I-K_kH_k)(x_k - \hat{x}_{k|k-1})]+ cov[K_kv_k] \\
&amp;=(I-K_kH_k)cov(x_k - \hat{x}_{k|k-1})(I-K_kH_k)^T+ K_kcov(v_k)K_k^T \\
&amp;=(I-K_kH_k)P_{k|k-1}(I-K_kH_k)^T+ K_kR_kK_k^T
\end{align}
\]</div>
<h2 id="eskf">ESKF<a class="headerlink" href="#eskf" title="Permanent link">&para;</a></h2>
<p>参见<code>Joan-Sola-1773-Quaternion-kinematics-for-the-error-state-Kalman-filter</code>的paper</p>
<h3 id="_5">优点<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<ul>
<li>error-state最小轻量化,参数和自由度一样，但是避免了参数化冗余(即强约束计算时可能随之而来的协方差奇异性的问题)</li>
<li>error-state总是保持误差处在0值附近，避免潜在的参数奇异性、万向锁问题/ 能保证任何时刻有效线性化</li>
<li>error-state足够小,意味着其二阶导基本可忽略，Jacobian计算会很容易很快或者Jacobian是恒定的</li>
<li>todo</li>
</ul>
<h3 id="eskf_1">ESKF基本介绍<a class="headerlink" href="#eskf_1" title="Permanent link">&para;</a></h3>
<p>状态量包括<code>true-state / nominal-state / error-state</code>
1. 高频IMU数据 <span class="arithmatex">\(u_m\)</span> 集成到<code>nominal-state</code> <span class="arithmatex">\(x\)</span>, 不考虑噪声项目 <span class="arithmatex">\(w\)</span> 和其他扰动
2. 实时累计的误差集成到 <code>error-state</code>(由小的信号状态量构成,有时序的动态线性系统进行<code>correct</code>,用到的控制及测量矩阵由<code>nominal-state</code>计算) <span class="arithmatex">\(\delta x\)</span> 并用ESKF评估(包含了所有的噪声项和扰动)
3. <code>nominal-state</code>集成的同时,ESKF会<code>prdict</code>一个<code>error-state</code>的高斯估计
4. 精度高于IMU的<code>anchor-msg</code>(rtk/lidar/vision)到达时对<code>error—state</code>进行<code>correct</code>,从而计算出一个后验的<code>error-state</code>的高斯估计,最后将<code>error-state</code>的均值注入到<code>nominal-state</code>后重置为0,<code>error-state</code>的协方差.....</p>
<h2 id="ycw">卡尔曼滤波(ycw)<a class="headerlink" href="#ycw" title="Permanent link">&para;</a></h2>
<p>The content mainly reference from <a href="https://blog.yongcong.wang/2020/10/29/autonomous/imm-for-prediction/">ycnw's IMM Prediction</a>
The Kalman filter which was published by R.E.Kalman in 1960, is a set of mathematical equations that provides an efficient computational (recursive) means to estimate the state of a process, in a way that minimizes the mean of the squared error. <!--more-->The filter is very powerful in several aspects: it supports estimations of past, present, and even future states, and it can do so even when the precise nature of the modeled system is unknown.</p>
<h3 id="basic-equations">Basic Equations<a class="headerlink" href="#basic-equations" title="Permanent link">&para;</a></h3>
<ul>
<li>overview </li>
</ul>
<div class="arithmatex">\[
\begin{aligned}
    \underset{n \times 1}{X_k} &amp;= \underset{n \times n}{A}\underset{n \times 1}{X_{k-1}} + \underset{n \times b}{B}   \underset{b \times 1}{U_{k-1}} + \underset{n \times 1}{w_{k-1}}\,(Q)\\\\
    \underset{m \times 1}{Z_k} &amp;= \underset{m \times n}{H}\underset{n \times 1}{X_k} + \underset{m \times 1}{v_{k}}\,(R)  
\end{aligned}
\]</div>
<ul>
<li>predict</li>
</ul>
<div class="arithmatex">\[
\begin{aligned}
    \underset{n \times 1}{X_k^{pre}} &amp;= \underset{n \times n}{A} \cdot \underset{n \times 1}{X_{k-1}} + \underset{n \times b}{B} \cdot \underset{b \times 1}{U_{k-1}}\\\\
    \underset{n \times n}{P_k^{pre}} &amp;= \underset{n \times n}{A} \cdot \underset{n \times n}{P_{k-1}} \cdot \underset{n \times n}{A^T} + \underset{n \times n}{Q}
\end{aligned}
\]</div>
<!-- $$
\begin{aligned}
    \underset{n \times n}{P^{pre}_k} will be wrong,it should be write as "\underset{n \times n}{P_k^{pre}}"
\end{aligned}
$$ -->
<ul>
<li>correct</li>
</ul>
<div class="arithmatex">\[
\begin{aligned}
    \mathcal{K_{n \times m}} &amp;= (P^{pre}_kH^T)  \cdot (HP^{pre}_kH^T + R)^{-1} \\\\
    X_k &amp;= X^{pre}_k + \mathcal{K}(Z_k- HX^{pre}_k) \\\\
    P_k &amp;= (I - \mathcal{K}H)P^{pre}_k
\end{aligned}
\]</div>
<h3 id="the-process-to-be-estimated">The process to be estimated<a class="headerlink" href="#the-process-to-be-estimated" title="Permanent link">&para;</a></h3>
<p>The Kalman filter addressed the general problem of trying to estimate the state <span class="arithmatex">\(x\in \Re^n\)</span> of a discrete-time controlled process that is governed by the linear stochastic difference equation:
$$
x_k = Ax_{k-1} + Bu_{k-1} + w_{k-1} \qquad p(w) \sim N(0, Q) \tag{1}
$$
with a measurement <span class="arithmatex">\(z \in \Re^m\)</span> that is:
$$
z_k = Hx_k + v_k \qquad p(v) \sim N(0,R) \tag{2}
$$
- The <span class="arithmatex">\(n*n\)</span> matrix <span class="arithmatex">\(A\)</span> is <code>transition matrix</code> which relates the state at the previous time step <span class="arithmatex">\(k-1\)</span> to the state at the current step <span class="arithmatex">\(k\)</span>, in the absence of either a driving function or process noise. Note that in practice <span class="arithmatex">\(A\)</span> might change with each time step, but here we assume it is constant.
- The <span class="arithmatex">\(n *1\)</span> matrix <span class="arithmatex">\(B\)</span> is <code>control matrix</code> which relates the optional control input <span class="arithmatex">\(u \in \Re^l\)</span> to the state <span class="arithmatex">\(x\)</span>.
- The <span class="arithmatex">\(m *n\)</span> matrix <span class="arithmatex">\(H\)</span> is <code>measurement matrix</code> which relates the state to the measurement <span class="arithmatex">\(z_k\)</span>. In practice <span class="arithmatex">\(H\)</span> might change with each time step, but here we also assume it is constant.
- The random variable <span class="arithmatex">\(w_{k-1}\)</span> and <span class="arithmatex">\(v_k\)</span> represent the process and measurement noise. They are assumed to be independent(of each other), it belongs to gauss-white noise with normal probability distributions. and <span class="arithmatex">\(Q\)</span> is <code>process noise covariance</code> and <span class="arithmatex">\(R\)</span> is <code>measurement noise covariance</code>, they might change with each time step, but we assume they are both constant.</p>
<h3 id="the-computational-origin-of-the-filter">The computational origin of the filter<a class="headerlink" href="#the-computational-origin-of-the-filter" title="Permanent link">&para;</a></h3>
<p>We define <span class="arithmatex">\(\hat{x}\_k^- \in \Re^n\)</span> to be our <code>priori state</code> estimate at step <span class="arithmatex">\(k\)</span> given knowledge of the process priori to step <span class="arithmatex">\(k\)</span> and <span class="arithmatex">\(\hat{x}\_k \in \Re^n\)</span> to be our <code>posteriori state</code>  estimate at step <span class="arithmatex">\(k\)</span> given measurement <span class="arithmatex">\(z_k\)</span>. we also define <span class="arithmatex">\(x_k\)</span> is the ground truth, then we can get a <code>priori</code> and a <code>posteriori</code> estimate errors as:
$$
prio estimate error:  e_k^- \equiv x_k - \hat{x}_k^-   \tag{3}
$$
$$
post estimate error: e_k \equiv x_k - \hat{x}_k \tag{4}
$$
The <code>priori</code> estimate error covariance is:
$$
P_k^-  = E[e_k<sup>-(e_k</sup>-)^T] \tag{5}
$$
The <code>posteriori</code> estimate error covariance is:
$$
P_k = E[e_ke_k^T] \tag{6}
$$
In deriving the equation for the kalman filter, we begin with the goal of finding an equation that compute an <code>posteriori</code> state estimate <span class="arithmatex">\(\hat{x}\_k\)</span> as a linear combination of the <code>priori</code> estimate <span class="arithmatex">\(\hat{x}\_k^-\)</span> and a weighted difference between an actual measurement <span class="arithmatex">\(z\_k\)</span> and a prediction of the measurement <span class="arithmatex">\(H\hat{x}\_k^-\)</span> as show below:
$$
\hat{x}_k = \hat{x}_k^- + K(z_k - H\hat{x}_k^-) \tag7
$$
The difference <span class="arithmatex">\((z\_k - H\hat{x}\_k^-)\)</span> is called the measurement <code>innovation</code> or <code>residual</code>. The residual reflects the discrepency bewteen the predicted measurement <span class="arithmatex">\(H\hat{x}\_k^-\)</span> and the actual measurement <span class="arithmatex">\(z_k\)</span>. A residual of zero means that the two are in complete agreement.
The <span class="arithmatex">\(n*m\)</span> matrix <span class="arithmatex">\(K\)</span> is chosen to be the <code>gain</code> or <code>blending factor</code> that minimizes the <code>posteriori</code> error covariance in (6).</p>
<p>This minimization can be accomplished by:
1. substituting (7) into the (4) and substituting that into (6);
2. performing the indicated expectation;
3. taking the derivative of the trace of the result with respect to <span class="arithmatex">\(K\)</span>;
4. setting the result equal to <span class="arithmatex">\(0\)</span> and then solving for <span class="arithmatex">\(K\)</span>.
One form of the resulting <span class="arithmatex">\(K\)</span> that minimized (6) is:</p>
<div class="arithmatex">\[
\begin{aligned}
   K_k  &amp;= P_k^-H^T(HP_k^-H^T \ +\ R )^{-1} \\\\
        &amp;= \frac{P_k^-H^T}{HP_k^-H^T \ +\ R }
\end{aligned} \tag{8}
\]</div>
<p>Looking at (10) we see that as the <code>measurement error covariance</code> <span class="arithmatex">\(R \to 0\)</span>, the gain <span class="arithmatex">\(K\)</span> weights the residual more heavily.Specially,
$$
\lim_{R_k \to 0}K_k = H^{-1} \tag{9}
$$
On the other hand, as the <code>priori estimate error covariance</code> <span class="arithmatex">\(P_k^- \to 0\)</span>, the gain <span class="arithmatex">\(K\)</span> weights the residual less heavily.Specially,
$$
\lim_{P_k^- \to 0}K_k = 0 \tag{10}
$$</p>
<p>Another way of thinking about the weighting by <span class="arithmatex">\(K\)</span> is that as the measurement error covariance <span class="arithmatex">\(R \to 0\)</span>, the actual measurement <span class="arithmatex">\(z_k\)</span> is <code>more trusted</code>, while the predicted mesaurement <span class="arithmatex">\(H\hat{x}_k^-\)</span> is <code>less trusted</code>. On the other hand, as the <code>priori estimate error covariance</code> <span class="arithmatex">\(P_k^- \to 0\)</span>, the actual measurement <span class="arithmatex">\(z_k\)</span> is <code>less trusted</code>, while the predicted measurement <span class="arithmatex">\(H\hat{x}_k^-\)</span> is <code>more trusted</code>.</p>
<h3 id="the-discrete-kalman-filter-algorithm">The discrete Kalman Filter Algorithm<a class="headerlink" href="#the-discrete-kalman-filter-algorithm" title="Permanent link">&para;</a></h3>
<p>The kalman filter estimate a process by using a form of feedback control: the filter estimates the process state at some time and then obtains feedback in the form of (noisy) measurement. As such, the equations for the Kalman filter falls into two groups:
- <code>time update</code>(predict) equations;
- <code>measurement update</code>(correct) equations;</p>
<p>The <code>time update</code> equations are responsible for projecting forwar(in time) the current state and error covariance estimates to obtain the <code>prior</code> estimates for the next time step.</p>
<p>The <code>measurement update</code> equations are responsible for the feedback, incorporating a new measurement into the <code>priori estimate</code> to obtain an improved <code>posterori</code> estimate.</p>
<p>The final estimation algorithm resembles that of a <code>predictor-&gt;corrector</code> algorithm for solving numerical problems:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>           Time Update -----&gt; Measurement Update
            (Predict)             (Correct)
                ^                     |
                |                     |
                -----------------------
</code></pre></div></td></tr></table></div>
The specific equations for the <code>time update(predictor)</code> are:
$$
\hat{x}_k^- = A\hat{x}_{k-1} + Bu_{k-1} \tag{11}
$$
$$
P_k^- = AP_{k-1}A^T + Q \tag{12}
$$
where:
- <span class="arithmatex">\(\hat{x}\_{k-1}\)</span> is the <code>posteriori</code> state from time step <span class="arithmatex">\(k-1\)</span>; 
- <span class="arithmatex">\(u\_{k-1}\)</span> is the control from time step <span class="arithmatex">\(k-1\)</span>;
- <span class="arithmatex">\(\hat{x}\_k^-\)</span> is the <code>priori</code> state from time step <span class="arithmatex">\(k\)</span>;
- <span class="arithmatex">\(P_{k-1}\)</span> is the <code>posterirori</code> estimate error covariance from time step <span class="arithmatex">\(k-1\)</span>;
- <span class="arithmatex">\(P_k^-\)</span> is the <code>priori</code> estimate error covariance from time step <span class="arithmatex">\(k\)</span>;</p>
<p>The specific equations for the <code>measurement update(corrector)</code> are:</p>
<div class="arithmatex">\[
K_k = P_k^-H^T \cdot (HP_k^-H^T + R)^{-1} \tag{13}
\]</div>
<div class="arithmatex">\[
\hat{x}\_k = \hat{x}\_k^- + K_k\cdot (z_k - H\hat{x}\_k^-) \tag{14}
\]</div>
<div class="arithmatex">\[
P_k= (I - K_kH) \cdot P_k^- \tag{15}
\]</div>
<p>where:
- <span class="arithmatex">\(K_k\)</span> is the <code>gain</code> from time step <span class="arithmatex">\(k\)</span>;
- <span class="arithmatex">\(z_k\)</span> is the actual measurement variable from time step <span class="arithmatex">\(k\)</span>;
- <span class="arithmatex">\(\hat{x}\_k\)</span> is the <code>posteriori</code> state from time step <span class="arithmatex">\(k\)</span>;
- <span class="arithmatex">\(P_k\)</span> is the <code>posteriori</code> estimate error covariance from time step <span class="arithmatex">\(k\)</span>;</p>
<h3 id="python-of-kalman-filter">Python of Kalman Filter<a class="headerlink" href="#python-of-kalman-filter" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">KalmanFilter</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A</span> <span class="o">=</span> <span class="n">A</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">B</span> <span class="o">=</span> <span class="n">B</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">H</span> <span class="o">=</span> <span class="n">H</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">=</span> <span class="n">R</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">U</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">B</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">X_pre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">P_pre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">H</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A</span> <span class="o">=</span> <span class="n">A</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">U</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">H</span> <span class="o">=</span> <span class="n">H</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">X_pre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">P_pre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span>

    <span class="k">def</span> <span class="nf">filt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Z</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        x = A*x + B*u +Q</span>
<span class="sd">        y = H*x +     R</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__predict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span>

    <span class="k">def</span> <span class="nf">__predict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        x_next = A*x + B*u</span>
<span class="sd">        P_next = A*P*AT + Q</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">X_pre</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">U</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">P_pre</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Q</span>

    <span class="k">def</span> <span class="nf">__update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Z</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        K = (P_next*HT) * (H*P_next*HT + R).inverse()</span>
<span class="sd">        x = x_next + K*(z - H*x_next)</span>
<span class="sd">        P = P_next - K*H*P_next</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">K</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">P_pre</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>
                   <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P_pre</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">R</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">X_pre</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">Z</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">X_pre</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">P_pre</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">P_pre</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>